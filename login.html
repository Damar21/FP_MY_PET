<!DOCTYPE html>
<html lang="en">
<head>
       <!-- Required meta tags -->
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1">
   
       <!-- Bootstrap CSS -->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <link rel="stylesheet" href="./css/login.css">
        <link rel="stylesheet" href="./css/fontawesome/css/all.css">
       <title>Hello, world!</title>
    <title>Document</title>
</head>
<body style="background-color: #f5f5f5;">
    <div id="loading"></div>
    <section class="login">    
        
        <div style="width: 30%;">
            <p class="mx-5" style="text-align: center; font-size: 36px;"  > My Pet </p>

        <div  class="card rounded shadow p-3">
            <p class="mb-5" style="text-align: center; font-size: 24px;"  > Login Page </p>
            <form id="login-frm" action="">
                <input type="text" placeholder="Username" class="uname form-control mb-3">
                <input type="password" placeholder="Password" class="pass form-control mb-3">
                <div id="msg"></div>
                <input type="submit" value="login" class="btn form-control btn-primary">
                <p> or register <a href="register"> here </a></p>
            </form>
        </div>
    </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="./js/partial.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>

        function showLoadingImage() {
            console.log("on my way");
            $('#loading').show();
        }

        function hideLoadingImage() {
            $('#loading').hide();
        }
        

        var code ={};
       $('#login-frm').submit(function(){
            
            var uname = $('.uname').val();
            var pass = $('.pass').val();
            var data =  {};
            data.email = uname;
            data.password = pass;
            console.log(data);
            showLoadingImage();
            axios.post('http://localhost:4000/api/client/auth', data).then(function (response,data) {
            localStorage.setItem("authtoken", response.data.token);
            window.location.href = '/fp-client/UserProfile.html';

            })
            .catch(function (error) {
            if(error.response.status==404){
                showMessage(false, "email address not registered");
                hideLoadingImage();
            }else if(error.response.status==401){
                showMessage(false, "your password is not match with the account");
                hideLoadingImage();
            }else{
                showMessage(false, "error opo maneh coba");
                hideLoadingImage();
            }
            });    
            event.preventDefault();
            

       }); 
      
    </script>   
</body>
</html>